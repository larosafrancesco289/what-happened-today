@import 'tailwindcss';

/* Tailwind v4 dark mode: map the `dark:` variant to both `.dark` and `[data-theme="dark"]` roots */
@variant dark (&:where(.dark, .dark *), &:where([data-theme="dark"], [data-theme="dark"] *));

/* Tailwind v4 token configuration via @theme */
@theme {
  /* Colors: Imperial Archive (light) / Deep Court (dark) */
  --color-bg-light: #f4f1ec;
  --color-bg-dark: #08070a;

  --color-panel-light: #fdfbf8;
  --color-panel-dark: #121017;

  --color-muted-light: #f1ede7;
  --color-muted-dark: #17131e;

  --color-text-light: #1E1C18;
  --color-text-dark: #F1EFEF;

  --color-subtle-light: #5B534B;
  --color-subtle-dark: #C8C3D1;

  --color-accent-light: #B9975B;
  --color-accent-dark: #D4AF37;

  --color-accent2-light: #6D2A8A;
  --color-accent2-dark: #5B2C6F;

  --color-border-light: #d5cfc4;
  --color-border-dark: #2E2533;

  /* Radii */
  --radius-xl: 16px;

  /* Shadows */
  --shadow-card: 0 10px 25px rgba(0,0,0,.1);
  --shadow-cardDark: 0 8px 24px rgba(0,0,0,.45);
}

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  body {
    font-feature-settings: "rlig" 1, "calt" 1;
    font-family: var(--font-inter), ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    /* Fallback base colors in case utilities are not applied yet */
    background-color: var(--color-bg-light);
    color: var(--color-text-light);
  }
  /* Dark theme base fallback */
  :where(.dark, [data-theme="dark"]) body {
    background-color: var(--color-bg-dark);
    color: var(--color-text-dark);
  }

  /* Smooth theme transitions */
  *,
  *::before,
  *::after {
    transition: 
      background-color 400ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 400ms cubic-bezier(0.4, 0, 0.2, 1),
      color 400ms cubic-bezier(0.4, 0, 0.2, 1),
      fill 400ms cubic-bezier(0.4, 0, 0.2, 1),
      stroke 400ms cubic-bezier(0.4, 0, 0.2, 1),
      opacity 400ms cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 400ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Prevent transitions during page load */
  .no-transitions *,
  .no-transitions *::before,
  .no-transitions *::after {
    transition: none !important;
  }

  /* Custom scrollbar for webkit browsers */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-muted-light dark:bg-muted-dark;
    transition: background-color 400ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-border-light dark:bg-border-dark rounded-full;
    transition: background-color 400ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-subtle-light dark:bg-subtle-dark;
  }

  /* Modern glass morphism effects */
  .glass {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  .glass-light {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

/* Custom utilities */
@layer utilities {
  .text-gradient {
    /* Accent gradient tuned for Neoâ€‘Byzantine tokens */
    background: linear-gradient(135deg, var(--color-accent-light), var(--color-accent2-light));
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .font-mono-ui {
    font-family: var(--font-jetbrains), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  }

  /* Typography improvements for better readability */
  .summary-text {
    max-width: 65ch;           /* Optimal reading width */
    line-height: 1.75;         /* Generous line height for readability */
    letter-spacing: -0.01em;   /* Slight tightening for body text */
    text-wrap: pretty;         /* Better text wrapping for modern browsers */
  }

  /* Headline title styling */
  .headline-title {
    line-height: 1.4;
    letter-spacing: -0.02em;
  }

  /* Accessible focus ring using accent tokens */
  .focus-outline {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }
  .focus-outline:focus-visible {
    outline-color: var(--color-accent2-light);
  }
  :where(.dark) .focus-outline:focus-visible,
  :where([data-theme="dark"]) .focus-outline:focus-visible {
    outline-color: var(--color-accent2-dark);
  }

  /* Category filter button active state */
  .category-active {
    background-color: var(--color-accent-light);
    color: white;
  }
  :where(.dark) .category-active,
  :where([data-theme="dark"]) .category-active {
    background-color: var(--color-accent-dark);
  }
}
